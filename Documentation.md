---


---

<h1 id="dialogue-by-narrenschlag">Dialogue by Narrenschlag</h1>
<p>First. Thank you for your purchase. Welcome to the documentation of the Dialogue package. If you have any suggestions, ideas or innovations to add to this please feel free to contact me.</p>
<h2 id="first-steps-setup">First Steps (Setup)</h2>
<p>At first make sure to download the latest version of <a href="https://narrenschlag.itch.io/cutulu">Cutulu</a>. You can download it on my itch website for free. It adds the core utility and handy functions, my packages require to work.</p>
<p>Now you can import the package by drag’n’drop or by <strong>right click&gt;&gt;import package</strong>.</p>
<p>Check the sample assets and the sample scene out to get a basic understanding. Your scene normally only requires the following prefabs/scripts to already work:</p>
<blockquote>
<p><strong>DataManager</strong>.cs (Script of Cutulu)<br>
<strong>Dialogue Interface</strong> (Prefab of Dialogue)</p>
</blockquote>
<h3 id="datamanager">DataManager</h3>
<p>This script is made to be overwritten/inherited on by your own save system but comes with a simple PlayerPrefs sample that you can use without modifying it.</p>
<h3 id="dialogue-interface">Dialogue Interface</h3>
<p>This prefab has to be added to your <strong>Canvas</strong>. Make sure to set the <strong>CanvasScaler</strong>.cs to <strong>Scale with Screen</strong> and use a reference resolution of <strong>1920x1080</strong>. This is not required but I made the prefabs for that scaling and it is a pretty nice to work with aswell, as normal screens have that ratio.</p>
<p>On the prefab there are a number of important scripts that make the whole thing work. Here is a little walkthrough.</p>
<h4 id="distributer.cs">Distributer.cs</h4>
<p>Basically a manager that handles all the requests and provides all the utility and functions you will use from outside the package to access it easily and fast.</p>
<p>It enables the functions you can see below the following scripts.</p>
<h4 id="conversation.cs">Conversation.cs</h4>
<blockquote>
<p>Component.<strong>startDialogue(TreeAsset, id)</strong><br>
Component.<strong>startDialogue(TreeAsset)</strong></p>
</blockquote>
<p>This script handles all of the conversations, awnser options, etc. It is basically the manager of the whole operation. It reads from the <strong>TreeAsset</strong> fed into it.</p>
<p>Using string-cmd, a utility addon I added to the Cutulu API for this use case, you can call internal functions of scripts with args to more easily enable your writers and coders to access data in your game and increase efficiency. Further down I will explain this more.</p>
<p>With <strong>startDialogue</strong> you also define a target for the function calls to be broadcasted on.</p>
<h4 id="inputs">Inputs</h4>
<blockquote>
<p>string.<strong>inputString(Action&lt;bool, string&gt;, bool)</strong><br>
string.<strong>inputFloat(Action&lt;bool, float&gt;, bool)</strong><br>
string.<strong>inputInt(Action&lt;bool, int&gt;, bool)</strong></p>
</blockquote>
<p>Defining all three input methods at once here as I am too busy to write poems for each of them. So basically the <strong>string base</strong> is used as the <em>interface title</em>, the <strong>action</strong> as a <em>callback for your functions on submit or cancel of the player</em> and the <strong>bool</strong> as an <em>indicator if it can be cancelled</em>.</p>
<h3 id="audio">Audio</h3>
<p>The package comes with a simple character based audio system that reads the char currently being placed and plays a tune based on it.</p>
<h3 id="exporting-the-dialogue-tree">Exporting the Dialogue Tree</h3>
<p>By opening the <strong>TreeAsset</strong> in the inspector and providing a path you can import and export it as .txt file to your <em>StreamingAssets/dialogue</em> folder by pressing the editor buttons.</p>
<p>You can edit the .txt files in an text editor aswell or give them to your writers to edit them easily and import them back in.</p>
<h4 id="languages-and-translation">Languages and Translation</h4>
<p>You can utilize the <strong>Cutulu API</strong> to localize your dialogues by using the given addon. Just enable it in the <strong>Conversation prefab</strong> and in the dialogue tree text boxes provide the (string)id-names in the translation-file so the Translator can easily use it.</p>
<blockquote>
<p>You can enable it by toggeling the <strong>Translate Text</strong> bool on your <strong>Distributer</strong>. Be aware that you need to setup your Translator first.</p>
</blockquote>
<h3 id="string-cmd">String-CMD</h3>
<p>This is actually quite simple to understand. It is basically used for the following.</p>
<blockquote>
<p>Reading and Writing Data to your dialogues (names, gold, etc.)<br>
Call functions in a given GameObject by using BroadCast()<br>
Formatting in TextMeshPro-RichText</p>
</blockquote>
<h4 id="syntax-and-samples">Syntax and Samples</h4>
<blockquote>
<p>in text: “hello my name is <strong>{v:s:player_name; log:I&lt;3U}</strong>”</p>
</blockquote>
<p>In a text string you want to use the ‘{’ and ‘}’ for definition.<br>
You may use ‘:’ for argument seperation.<br>
v =&gt; value<br>
s =&gt; string<br>
player_name =&gt; Retrieves key:“player_name” from DataManager.cs</p>
<p>The second command is declared after seperating it from the last with ‘;’.<br>
log =&gt; Debug.Log<br>
I&lt;3U =&gt; Prints “I&lt;3U” to the console</p>
<blockquote>
<p>in cmd-line: “<strong>v:s:player_name; log:I&lt;3U</strong>”</p>
</blockquote>
<p>In the cmd-line you do not need the ‘{’ or ‘}’.</p>
<h3 id="string-cmd-in-your-dialogue">String-CMD in your dialogue</h3>
<p>The structure is quite simple to understand and easy to use. So how would it work? Here a sample for you.</p>
<pre class=" language-mermaid"><svg id="mermaid-svg-xiccCXqcalV3i55X" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="228.609375" style="max-width: 908.765625px;" viewBox="0 0 908.765625 228.609375"><style>#mermaid-svg-xiccCXqcalV3i55X{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#000000;}#mermaid-svg-xiccCXqcalV3i55X .error-icon{fill:#552222;}#mermaid-svg-xiccCXqcalV3i55X .error-text{fill:#552222;stroke:#552222;}#mermaid-svg-xiccCXqcalV3i55X .edge-thickness-normal{stroke-width:2px;}#mermaid-svg-xiccCXqcalV3i55X .edge-thickness-thick{stroke-width:3.5px;}#mermaid-svg-xiccCXqcalV3i55X .edge-pattern-solid{stroke-dasharray:0;}#mermaid-svg-xiccCXqcalV3i55X .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-svg-xiccCXqcalV3i55X .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-svg-xiccCXqcalV3i55X .marker{fill:#666;stroke:#666;}#mermaid-svg-xiccCXqcalV3i55X .marker.cross{stroke:#666;}#mermaid-svg-xiccCXqcalV3i55X svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-svg-xiccCXqcalV3i55X .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#000000;}#mermaid-svg-xiccCXqcalV3i55X .cluster-label text{fill:#333;}#mermaid-svg-xiccCXqcalV3i55X .cluster-label span{color:#333;}#mermaid-svg-xiccCXqcalV3i55X .label text,#mermaid-svg-xiccCXqcalV3i55X span{fill:#000000;color:#000000;}#mermaid-svg-xiccCXqcalV3i55X .node rect,#mermaid-svg-xiccCXqcalV3i55X .node circle,#mermaid-svg-xiccCXqcalV3i55X .node ellipse,#mermaid-svg-xiccCXqcalV3i55X .node polygon,#mermaid-svg-xiccCXqcalV3i55X .node path{fill:#eee;stroke:#999;stroke-width:1px;}#mermaid-svg-xiccCXqcalV3i55X .node .label{text-align:center;}#mermaid-svg-xiccCXqcalV3i55X .node.clickable{cursor:pointer;}#mermaid-svg-xiccCXqcalV3i55X .arrowheadPath{fill:#333333;}#mermaid-svg-xiccCXqcalV3i55X .edgePath .path{stroke:#666;stroke-width:1.5px;}#mermaid-svg-xiccCXqcalV3i55X .flowchart-link{stroke:#666;fill:none;}#mermaid-svg-xiccCXqcalV3i55X .edgeLabel{background-color:white;text-align:center;}#mermaid-svg-xiccCXqcalV3i55X .edgeLabel rect{opacity:0.5;background-color:white;fill:white;}#mermaid-svg-xiccCXqcalV3i55X .cluster rect{fill:hsl(210,66.6666666667%,95%);stroke:#26a;stroke-width:1px;}#mermaid-svg-xiccCXqcalV3i55X .cluster text{fill:#333;}#mermaid-svg-xiccCXqcalV3i55X .cluster span{color:#333;}#mermaid-svg-xiccCXqcalV3i55X div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(-160,0%,93.3333333333%);border:1px solid #26a;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-svg-xiccCXqcalV3i55X:root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}#mermaid-svg-xiccCXqcalV3i55X flowchart{fill:apa;}</style><g><g class="output"><g class="clusters"></g><g class="edgePaths"><g class="edgePath LS-A LE-B" style="opacity: 1;" id="L-A-B"><path class="path" d="M158.2426302633287,73.57837611456134L260.5234375,60.0859375L362.15625,74.02292655590718" marker-end="url(https://stackedit.io/app#arrowhead6)" style="fill:none"></path><defs><marker id="arrowhead6" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-A LE-A" style="opacity: 1;" id="L-A-A"><path class="path" d="M40.15489791178783,145.2347548263664L8,191.13020833333334L8,199.19010416666666L83.4453125,207.25L158.890625,199.19010416666666L158.890625,191.13020833333334L126.73572708821217,145.2347548263664" marker-end="url(https://stackedit.io/app#arrowhead7)" style="fill:none"></path><defs><marker id="arrowhead7" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-B LE-C" style="opacity: 1;" id="L-B-C"><path class="path" d="M499.578125,83.4453125L590.1328125,83.4453125L680.6875,83.4453125" marker-end="url(https://stackedit.io/app#arrowhead8)" style="fill:none"></path><defs><marker id="arrowhead8" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-B LE-A" style="opacity: 1;" id="L-B-A"><path class="path" d="M362.15625,92.86769844409282L260.5234375,106.8046875L158.2426302633287,93.31224888543866" marker-end="url(https://stackedit.io/app#arrowhead9)" style="fill:none"></path><defs><marker id="arrowhead9" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-C LE-A" style="opacity: 1;" id="L-C-A"><path class="path" d="M728.9895257012352,106.8046875L590.1328125,159.34375L430.8671875,159.34375L260.5234375,159.34375L152.78938876511194,113.16726171536939" marker-end="url(https://stackedit.io/app#arrowhead10)" style="fill:none"></path><defs><marker id="arrowhead10" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g></g><g class="edgeLabels"><g class="edgeLabel" style="opacity: 1;" transform="translate(260.5234375,60.0859375)"><g transform="translate(-31.84375,-13.359375)" class="label"><rect rx="0" ry="0" width="63.6875" height="26.71875"></rect><foreignObject width="63.6875" height="26.71875"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-A-B" class="edgeLabel L-LS-A' L-LE-B">find CMD</span></div></foreignObject></g></g><g class="edgeLabel" style="opacity: 1;" transform="translate(83.4453125,207.25)"><g transform="translate(-42.609375,-13.359375)" class="label"><rect rx="0" ry="0" width="85.21875" height="26.71875"></rect><foreignObject width="85.21875" height="26.71875"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-A-A" class="edgeLabel L-LS-A' L-LE-A">find no cmd</span></div></foreignObject></g></g><g class="edgeLabel" style="opacity: 1;" transform="translate(590.1328125,83.4453125)"><g transform="translate(-65.5546875,-13.359375)" class="label"><rect rx="0" ry="0" width="131.109375" height="26.71875"></rect><foreignObject width="131.109375" height="26.71875"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-B-C" class="edgeLabel L-LS-B' L-LE-C">get text from cmd</span></div></foreignObject></g></g><g class="edgeLabel" style="opacity: 1;" transform="translate(260.5234375,106.8046875)"><g transform="translate(-76.6328125,-13.359375)" class="label"><rect rx="0" ry="0" width="153.265625" height="26.71875"></rect><foreignObject width="153.265625" height="26.71875"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-B-A" class="edgeLabel L-LS-B' L-LE-A">get no text from cmd</span></div></foreignObject></g></g><g class="edgeLabel" style="opacity: 1;" transform="translate(430.8671875,159.34375)"><g transform="translate(-31.1875,-13.359375)" class="label"><rect rx="0" ry="0" width="62.375" height="26.71875"></rect><foreignObject width="62.375" height="26.71875"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-C-A" class="edgeLabel L-LS-C' L-LE-A">continue</span></div></foreignObject></g></g></g><g class="nodes"><g class="node default" style="opacity: 1;" id="flowchart-A-30" transform="translate(83.4453125,83.4453125)"><circle x="-75.4453125" y="-23.359375" r="75.4453125" class="label-container"></circle><g class="label" transform="translate(0,0)"><g transform="translate(-65.4453125,-13.359375)"><foreignObject width="130.890625" height="26.71875"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">write to text body</div></foreignObject></g></g></g><g class="node default" style="opacity: 1;" id="flowchart-B-31" transform="translate(430.8671875,83.4453125)"><rect rx="5" ry="5" x="-68.7109375" y="-23.359375" width="137.421875" height="46.71875" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-58.7109375,-13.359375)"><foreignObject width="117.421875" height="26.71875"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">try execute cmd</div></foreignObject></g></g></g><g class="node default" style="opacity: 1;" id="flowchart-C-35" transform="translate(790.7265625,83.4453125)"><rect rx="5" ry="5" x="-110.0390625" y="-23.359375" width="220.078125" height="46.71875" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-100.0390625,-13.359375)"><foreignObject width="200.078125" height="26.71875"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">write cmd text to text body</div></foreignObject></g></g></g></g></g></g></svg></pre>
<p>So basically it writes the text to the body until a cmd is found. As it is found it pauses the writing and executes the cmd. If the cmd causes a return string it will be added to the text body aswell (for name reading from data f.e.). If it doesn’t find a return string value or the string has been added to the text body it simply continues writing until there is no more text to write or another cmd is found (repeats the cycle).</p>
<h2 id="contact">Contact</h2>
<p>You can reach me via <a href="mailto:business@schecklmann.eu">email</a> or via <a href="https://twitter.com/narrenschlag">twitter</a>.</p>

